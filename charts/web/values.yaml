# Default values for web chart.
# These can be overridden via --values or --set.

# Global enable flag for the entire deployment
enabled: false

# Container image configuration
image:
  # Repository for the web frontend image
  # For local development: yetanotherboilerplate/web
  # For production: ghcr.io/jkobti/yetanotherboilerplate/web
  repository: yetanotherboilerplate/web
  # Image tag or sha
  tag: dev
  # Image pull policy: IfNotPresent (local), Always (registry)
  pullPolicy: IfNotPresent

# Number of replicas
replicaCount: 1

# Kubernetes Service configuration
service:
  type: ClusterIP
  port: 80

# Pod-level annotations (e.g., for Prometheus scraping)
podAnnotations: {}

# Resource requests and limits
resources:
  requests:
    cpu: 50m
    memory: 64Mi
  limits:
    cpu: 200m
    memory: 256Mi

# Ingress configuration (disabled by default; enable for external routing)
ingress:
  enabled: false
  className: nginx
  # Annotations for cert-manager integration (cert-manager.io/cluster-issuer)
  # For local: comment out or use cert-manager.io/cluster-issuer: local-selfsigned
  # For staging: cert-manager.io/cluster-issuer: letsencrypt-staging
  # For production: cert-manager.io/cluster-issuer: letsencrypt-prod
  annotations: {}
    # cert-manager.io/cluster-issuer: letsencrypt-staging
  # Hostnames and paths for this Ingress
  hosts:
    - host: app.local.dev
      paths:
        - path: /
          pathType: Prefix
  # TLS configuration (disabled by default; enable with cert-manager)
  tls: []
    # - secretName: web-tls
    #   hosts:
    #     - app.local.dev

# Horizontal Pod Autoscaler configuration (disabled by default)
autoscaling:
  enabled: false
  minReplicas: 1
  maxReplicas: 3
  targetCPUUtilizationPercentage: 70

# Standard Kubernetes labels
labels:
  app.kubernetes.io/part-of: yetanotherboilerplate
  app.kubernetes.io/component: web

# Image pull secrets for private registries
imagePullSecrets: []

# Node scheduling constraints
nodeSelector: {}

# Pod tolerations (e.g., for taints)
tolerations: []

# Secret management configuration
# IMPORTANT: Web app is a STATIC BUILD compiled with config at Docker build time.
# Kubernetes Secrets CANNOT change runtime behavior (unlike backend).
#
# Configuration flow:
# 1. At Docker build time: Pass --build-arg API_BASE_URL, FIREBASE_* values
# 2. Flutter compiles these into JavaScript via --dart-define
# 3. At runtime: Config is baked into the app; env vars have NO effect
#
# For dynamic config changes without rebuild: See Docs/10-frontend-secrets.md
#
# To customize per environment:
# - Staging: Rebuild image with: docker build --build-arg API_BASE_URL=https://api-staging.example.com
# - Production: Rebuild image with: docker build --build-arg API_BASE_URL=https://api.example.com
# - Deploy same image to all clusters (config is immutable in the build)
#
# Kubernetes Secrets are kept for documentation/future use only.
secrets:
  # UNUSED: Kubernetes Secrets cannot affect static web builds
  # Kept for consistency; not injected into NGINX containers
  envSecretName: web-env
  injectAsEnv: false

# Environment variable overrides for development (non-sensitive values only)
# Sensitive values must come from secrets above.
env: {}
  # API_URL: "http://api.local.dev"
  # DEBUG: "false"

# Pod affinity rules
affinity: {}
