<!DOCTYPE html>
<html>

<head>
    <base href="$FLUTTER_BASE_HREF">
    <meta charset="UTF-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=Edge" />
    <meta name="description" content="yetAnotherBoilerplate Flutter web app" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Flutter Web</title>
    <link rel="manifest" href="manifest.json" />
    <meta name="theme-color" content="#000000" />
    <style>
        /* Minimal styling while Flutter initializes */
        html,
        body {
            height: 100%;
        }

        body {
            margin: 0;
            background: #0b0f14;
            color: #e9eef5;
            font-family: Inter, system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif;
        }

        /* Fix Flutter web text field duplication issue */
        /* Hide the semantic text field overlay that causes double rendering */
        flt-semantics input,
        flt-semantics textarea {
            opacity: 0 !important;
            pointer-events: none !important;
        }

        /* Ensure the actual Flutter canvas text field is visible */
        flt-text-editing-host {
            pointer-events: auto !important;
        }

        /* Alternative fix: make semantic inputs transparent but functional */
        input[flt-semantic-input],
        textarea[flt-semantic-input] {
            color: transparent !important;
            background-color: transparent !important;
            border: none !important;
            outline: none !important;
        }
    </style>
    <script src="flutter.js" defer></script>
    <!-- Firebase JS SDK for web push (compat builds for simplicity) -->
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-app-compat.js"></script>
    <script src="https://www.gstatic.com/firebasejs/9.6.11/firebase-messaging-compat.js"></script>
</head>

<body>
    <script>
        // Standard Flutter web bootstrap
        window.addEventListener('load', function () {
            if (typeof _flutter === 'undefined' || !_flutter.loader) {
                console.error('Flutter loader not found.');
                return;
            }
            _flutter.loader
                .loadEntrypoint({
                    // In dev we avoid service workers to simplify reloads
                    serviceWorker: { disabled: true },
                    // Use CanvasKit renderer to avoid text duplication issues
                    renderer: "canvaskit",
                })
                .then(function (engineInitializer) {
                    return engineInitializer.initializeEngine();
                })
                .then(function (appRunner) {
                    return appRunner.runApp();
                })
                .catch(function (e) {
                    console.error('Failed to load Flutter app:', e);
                });
        });
    </script>
</body>

</html>
